"use strict";function _defineProperty(e,i,a){return i in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}var _Api,Api=(_Api={SERVER_MESSAGE_TYPES:{CAL03:"info",CAL04:"info",CAL05:"info"},_loadingContainer:null,setLoadingContainer:function(e){this._loadingContainer=e},debug:!1,request:function(e,i,a,t,r,s,n){r=r||Utils.onResponse();var l=this.getActionUrl(i,s);Log.info("Api::request "+e+" url:"+l+" ... type: "+s);var o=$.ajax({cache:"direct"==s,method:e,dataType:"json",headers:{"Content-Type":"application/json",app_key:Settings.appKey},url:this.getActionUrl(i,s),data:a}).done(function(e){"base64"==s&&(e=__.d(e.data)),e&&e.success||"direct"==s?t&&t(e):(Log.error("Api::request - url: "+l+" - DONE ERROR: ",e),r&&r(e))}).fail(function(e){Log.error("Api::request - url: "+l+" - FAIL ERROR: ",e),"function"==typeof r&&r(e),Api.debug&&e&&e.responseJSON&&Toasts.add("Errore lato server",(e.responseJSON.Message||"")+"<br><small>"+(e.responseJSON.ExceptionMessage||"")+"</small>","danger")});return this._loadingContainer&&!n&&Globals.manageLoading(this._loadingContainer,o),o},get:function(e,i,a,t,r,s){return this.request("get",e,i,a,t,r,s)},post:function(e,i,a,t,r,s){return this.request("post",e,i&&JSON.stringify(i),a,t,r,s)},put:function(e,i,a,t,r,s){return this.request("put",e,i&&JSON.stringify(i),a,t,r,s)},del:function(e,i,a,t,r,s){return this.request("delete",e,i&&JSON.stringify(i),a,t,r,s)},direct:function(e,i,a){return this.request("get",e,null,i,a,"direct")},download:function(e,i,a,t,r){var s=this,n=new XMLHttpRequest;n.open(r||"GET",e,!0),n.responseType="blob",n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.setRequestHeader("app_key",Settings.appKey),n.onload=function(e){if(200==this.status){var i=s.parseContentDisposition(this.getResponseHeader("content-disposition")),r=new Blob([this.response],{type:this.response.type}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download=i.filename||"data.xls",document.body.appendChild(l),l.click(),document.body.removeChild(l),a&&a(this)}else t&&t(this)},n.send(i&&JSON.stringify(i))},getResource:function(e,i,a,t){var r=$.Deferred(),s=new XMLHttpRequest;return s.responseType=i||"blob",s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&(200==s.status?(r.resolve(s.response),a&&a(s.response)):(r.reject(s),t&&t(s)))},s.open("GET",e,!0),s.setRequestHeader("app_key",Settings.appKey),s.send(),r.promise()},parseContentDisposition:function(e){var i={};return(e||"").split(/;\s*/g).map(function(e){var a=e.split("=");i[a[0]]=a[1]}),i},fake:function(e,i,a,t){Log.info("Api::fake success:"+e);var r={success:e,data:i};return e?a(r):t(r),!1},promise:function(e,i,a,t,r){var s=$.Deferred();return this._loadingContainer&&Globals.manageLoading(this._loadingContainer,s.promise()),setTimeout(function(){e?s.resolve(i||{success:!0}):s.reject(i||{success:!1})},a||0),$.when(s).then(t,r),s.promise()},login:function(e,i,a,t,r){return this.put("utente/login?"+$.param({alias_lega:a}),{username:e,password:i},t,r,"base64")},loginById:function(e,i,a){return this.get("utente/loginbyid",{id_utente:e},i,a)},loginFB:function(e,i,a){return this.get("utente/loginsocialcontokenfb",{fb_token:e},i,a,"base64")},logout:function(e,i){return this.get("utente/logout",null,e,i)},register:function(e,i,a){return e.app=0,e.marketing=Utils.parseBool(e.marketing)?1:0,this.post("utente/registra?accepted_privacy=true&from="+e.from+"&app="+e.app,e,i,a,"base64")},unsubscribe:function(e,i,a){return this.del("utente/EliminaProfilo?id_utente="+e,null,i,a)},sendConfirmation:function(e,i,a){return this.get("messaggio/ReInviaEmailRegistrazione",null,i,a)},changeAccountInfo:function(e,i,a){return this.post("utente/modificausernameemail?"+$.param(e),null,i,a)},changePassword:function(e,i,a){return this.post("utente/modificapassword?"+$.param(e),null,i,a)},retrievePassword:function(e,i,a){return this.get("utente/RecuperaPassword",{username_or_email:e},i,a)},resetPassword:function(e,i,a,t,r){return this.get("utente/resettapassword",{password:e,codice:i,username:a},t,r)},changePersonalInfo:function(e,i,a){return this.post("utente/modificaprofilo?id_utente="+e.id,e,i,a)},setNotificationsPrefs:function(e,i,a){var t={id_utente:e.id,accetta:e.opponentFormation};return this.post("utente/ModificaAccettaEmailFormazioni?"+$.param(t),null,i,a)},savePreferences:function(e,i,a){return this.post("servizi/v1_leghe?ordine="+e.join(";"),JSON.stringify({ordine:e.join(";")}),i,a,"service")},getProvinces:function(e,i){return this.direct("static/pro.json",e,i)},getFavouriteTeams:function(e,i){return this.direct("static/squadre.json",e,i)},checkUsername:function(e,i,a){return this.get("utente/verificausername",{username:e},i,a)},connectToFacebook:function(e,i,a,t){return this.get("utente/collegaFb",{id_utente:e,fb_token:i},a,t)},disconnectFromFacebook:function(e,i,a){return this.get("utente/scollegaFb",{id_utente:e},i,a)},checkLeagueName:function(e,i,a){return this.get("servizi/v1_leghe",{nome_lega:e},i,a,"service")},createLeague:function(e,i,a,t,r,s,n,l,o,u){return this.put("servizi/v1_leghe?use_conditions=true&from=0&app=0",{nome_lega:e,tipo_lega:i,nome_squadra:a,presidente_squadra:t,nome:r,cognome:s,cf:n},o,u,"service")},searchLeague:function(e,i,a){return this.get("servizi/v1_leghericerca",{nome_lega:e},i,a,"service")},joinLeagueByParole:function(e,i,a,t){return this.post("servizi/v1_legheSquadra?"+$.param({nome_lega:e,parola:i}),null,a,t,"service")},joinLeagueByCode:function(e,i,a){return this.put("servizi/v1_legheSquadra/UnisciLegaCodice?"+$.param({codice:e}),null,i,a,"service")},searchGuideByTag:function(e,i,a){return this.get("servizi/v1_guidericerca?"+$.param({tag:e}),null,i,a,"service")},changeSuperAdmin:function(e,i,a,t,r,s){return this.get("servizi/v1_leghepartecipanti?"+$.param({alias_lega:e,old_user:i,new_user:a,email:t}),null,r,s,"service")},changeUserRole:function(e,i,a,t,r,s){return this.get("servizi/v1_leghepartecipanti?"+$.param({alias_lega:e,id_user:i,abilita:a,email:t}),null,r,s,"service")},removeLeagueMember:function(e,i,a,t,r,s){return this.del("servizi/v1_leghepartecipanti?"+$.param({alias_lega:e,id_squadra:i,id_user:a,main:t}),null,r,s,"service")},changeLeagueMember:function(e,i,a,t,r){return this.post("servizi/v1_leghepartecipanti?"+$.param({alias_lega:e,id_user:i,email:a}),null,t,r,"service")},cancelChangeLeagueMember:function(e,i,a,t){return this.put("servizi/v1_legheinviti?"+$.param({alias_lega:e,email:i}),null,a,t,"service")},acceptInvitation:function(e,i,a,t,r,s,n){return this.post("servizi/v1_legheinviti?"+$.param({alias_lega:e,username:i,password:a,type:t,codice:r}),null,s,n,"service")},setLeagueName:function(e,i,a,t){return this.post("servizi/v1_leghe?"+$.param({nome_lega:i,alias_lega:e}),null,a,t,"service")},setLeagueFoundationYear:function(e,i,a){return this.post("servizi/v1_leghe/CambiaAnnoFondazione?"+$.param({anno_fondazione:e,alias_lega:MyLeague.getAlias()}),null,i,a,"service")},changeLeagueType:function(e,i,a,t){return this.post("servizi/v1_leghe?"+$.param({tipo_attuale:i,alias_lega:e}),null,a,t,"service")},resetLeague:function(e,i,a,t){return this.post("servizi/v1_leghe?"+$.param({alias_lega:e,reset:"resetta"}),null,a,t,"service")},removeLeague:function(e,i,a){return this.del("servizi/v1_leghe?"+$.param({alias_lega:e}),null,i,a,"service")},saveLeagueLogo:function(e,i,a,t,r){return this.post("servizi/v1_leghe/logo?"+$.param({alias_lega:e}),{img:i,meta:a},t,r,"service")},getLeagueDocuments:function(e,i,a){return this.get("servizi/v1_legheDocumenti/lista?"+$.param({alias_lega:Globals.getLeagueAlias(),data:e}),null,i,a,"service")},saveLeagueDocument:function(e,i,a,t,r){var s={id_lega:0,titolo:e,testo:i,nome_allegato:a&&a.name||"",data:null,formato:a&&a.ext||"",id_utente:0,visibile:!0,inviato:1,allegato:a&&a.base64||""};return this.put("servizi/v1_legheDocumenti/inserisci?"+$.param({alias_lega:Globals.getLeagueAlias()}),s,t,r,"service")},deleteLeagueDocument:function(e,i,a,t,r){var s=window.atob(e).split("|"),n=s[0];s[1];return this.del("servizi/v1_legheDocumenti/elimina?"+$.param({alias_lega:Globals.getLeagueAlias(),data:n,nome_allegato:i,formato:a}),null,t,r,"service")},getLeagueDocument:function(e,i,a){var t=window.atob(e).split("|"),r=t[0];t[1];return this.post("servizi/v1_legheDocumenti/documentoById?"+$.param({alias_lega:Globals.getLeagueAlias(),data:r}),null,i,a,"service")},getLeagueCommunications:function(e,i,a){return this.get("servizi/v1_legheComunicazioni/lista?"+$.param({alias_lega:Globals.getLeagueAlias(),data:e,visibile:!0}),null,i,a,"service")},saveLeagueCommunication:function(e,i,a,t,r){var s={id_lega:0,titolo:e,testo:i,descrizione:"",data:null,id_utente:0,visibile:a,inviato:1};return this.put("servizi/v1_legheComunicazioni/inserisci?"+$.param({alias_lega:Globals.getLeagueAlias()}),s,t,r,"service")},publishLeagueCommunication:function(e,i,a,t){return this.post("servizi/v1_legheComunicazioni/modifica?"+$.param({alias_lega:Globals.getLeagueAlias(),data:e,visibile:visible}),null,a,t,"service")},deleteLeagueCommunication:function(e,i,a){var t=window.atob(e).split("|"),r=t[0];t[1];return this.del("servizi/v1_legheComunicazioni/elimina?"+$.param({alias_lega:Globals.getLeagueAlias(),data:r,visibile:!0}),null,i,a,"service")},getLeagueCommunication:function(e,i,a){var t=window.atob(e).split("|"),r=t[0],s=t[1];return this.put("servizi/v1_legheComunicazioni/comunicazioneById?"+$.param({alias_lega:Globals.getLeagueAlias(),data:r,visibile:!0,inviato:s}),null,i,a,"service")},setLeagueParole:function(e,i,a,t,r,s){return this.get("servizi/v1_leghe?"+$.param({parola_ordine:e,abilita:i,alias_lega:t}),null,r,s,"service")},sendLeagueInvitation:function(e,i,a,t,r,s){var n={email:e,resend:a,alias_lega:i,code:t||""};return this.get("servizi/v1_legheinviti?"+$.param(n),null,r,s,"service")},deleteLeagueInvitation:function(e,i,a,t){return this.del("servizi/v1_legheinviti?"+$.param({email:e,alias_lega:i}),null,a,t,"service")},getRostersOptions:function(e,i){var a=MyLeague.getAlias();return this.get("servizi/v1_legheopzionirose/opzioni?alias_lega="+a,null,e,i,"service")},saveRostersOptions:function(e,i,a,t){return this.post("servizi/v1_legheopzionirose?alias_lega="+e,i,a,t,"service")},saveFormationsOptions:function(e,i,a,t){return this.post("servizi/v1_legheopzioniformazioni?alias_lega="+e,i,a,t,"service")},saveCalculationOptions:function(e,i,a,t){return this.post("servizi/v1_legheopzionicalcolo?alias_lega="+e,i,a,t,"service")},confirmLeagueRules:function(e,i){return this.post("servizi/v1_leghe/Regolamento?dummy=true&alias_lega="+Globals.getLeagueAlias(),null,e,i,"service")},editTeam:function(e,i,a,t){return this.put("servizi/v1_leghepartecipanti?alias_lega="+e+"&"+$.param(i),null,a,t,"service")},createCompetition:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/v1_leghecompetizione/crea?"+$.param(r),{competizione:e,id_squadre:i},a,t,"service")},editCompetition:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/v1_leghecompetizionemodifica/modifica?"+$.param(r),{competizione:e,id_squadre:i},a,t,"service")},saveCompetitionsPreferences:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),ordine:e.join(";")};return this.post("servizi/v1_leghecompetizione?"+$.param(t),null,i,a,"service")},editCalendar:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.put("servizi/v1_leghecompetizionemodifica/modifica?"+$.param(t),{competizione:e},i,a,"service")},editSerieAMatching:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.put("servizi/v1_leghecompetizionemodifica/modificagiornate?"+$.param(t),e,i,a,"service")},editPairings:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),giornata_inizio:0};return this.put("servizi/v1_leghecompetizionemodifica/modificaabbinamenti?"+$.param(t),e,i,a,"service")},archiveCompetition:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.del("servizi/V1_LegheCompetizione/elimina?"+$.param(t),null,i,a,"service")},restoreCompetition:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.put("servizi/v1_leghecompetizione/abilita?"+$.param(t),null,i,a,"service")},resetCompetition:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.del("servizi/v1_legaCalcolo/Resetta?"+$.param(t),null,i,a,"service")},downloadRosters:function(){return this.download(Settings.apiBaseUrl+"servizi/v1_legheSquadra/excel?alias_lega="+Globals.getLeagueAlias())},downloadFormations:function(e,i){var a={alias_lega:Globals.getLeagueAlias(),id_competizione:e,giornata:i,nome_competizione:Globals.getLeagueAlias(),dummy:5};return this.download(Settings.apiBaseUrl+"servizi/V1_LegheFormazioni/excel?"+$.param(a))},downloadCalendar:function(){return this.download(Settings.apiBaseUrl+"servizi/v1_legheCompetizione/excel?alias_lega="+Globals.getLeagueAlias()+"&id_competizione="+Competitions.getCurrent().id+"&nome_competizione="+Competitions.getCurrent().nome)},downloadRanking:function(){return this.download(Settings.apiBaseUrl+"servizi/v1_legheCompetizione/excelClassifica?tipo=1&alias_lega="+Globals.getLeagueAlias()+"&id_competizione="+Competitions.getCurrent().id+"&nome_competizione="+Competitions.getCurrent().nome)},downloadFreePlayers:function(){return this.download(Settings.apiBaseUrl+"servizi/V1_LegheCalciatori/listaSvincolatiExcel?alias_lega="+Globals.getLeagueAlias()+"&s=free")},getPartialRanking:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_competizione:e,giornata_inizio:i,giornata_fine:a};return this.get("servizi/V1_LegheCompetizione/ClassificaGiornate?"+$.param(s),null,t,r,"service")},downloadMovements:function(e,i){var a={alias_lega:Globals.getLeagueAlias(),id_mercato:e,id_squadra:i};return this.download(Settings.apiBaseUrl+"servizi/V1_LegheMercatoMovimenti/excel?"+$.param(a),null,null,null,"POST")},saveTeamLogo:function(e,i,a,t,r){return this.put("servizi/v1_legheSquadra/logo?"+$.param({alias_lega:e}),{img:i,meta:a},t,r,"service")},saveTeamShirt:function(e,i,a,t,r,s){return this.post("servizi/v1_legheSquadra/maglia?"+$.param({alias_lega:e}),{img:a,img_sponsor:i,meta:t},r,s,"service")},getSponsors:function(e,i){var a={alias_lega:Globals.getLeagueAlias()};return this.get("servizi/v1_legheSponsor/lista?"+$.param(a),null,e,i,"service")},getSponsorSrc:function(e,i){return this.direct("/static/sponsor.json",e,i)},sendAssistantInvitation:function(e,i,a,t,r){return this.put("servizi/v1_legheallenatori?"+$.param({alias_lega:e,email:i,squadra:a}),null,t,r,"service")},removeAssistant:function(e,i,a){return this.del("servizi/v1_legheallenatori?"+$.param({alias_lega:e}),null,i,a,"service")},changeNickname:function(e,i,a,t,r){return this.post("servizi/v1_legheallenatori?"+$.param({alias_lega:e,presidente:i,tipo:a}),null,t,r,"service")},changeTeamName:function(e,i,a,t){return this.post("servizi/v1_legheSquadra/nome?"+$.param({alias_lega:e,nome_squadra:i}),null,a,t,"service")},createMarket:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/v1_leghemercato/crea?"+$.param(t),e,i,a,"service")},editMarket:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.put("servizi/v1_leghemercato/modifica?"+$.param(t),e,i,a,"service")},toggleMarket:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e,pause:i};return this.put("servizi/v1_leghemercato/pausa?"+$.param(r),null,a,t,"service")},closeMarket:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_mercato:e};return this.put("servizi/v1_leghemercato/terminaAdesso?"+$.param(t),null,i,a,"service")},deleteMarket:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_mercato:e};return this.del("servizi/V1_LegheMercato/elimina?"+$.param(t),null,i,a,"service")},closeSession:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id:i,id_mercato:e};return this.post("servizi/v1_leghebuste/TerminaTornata?"+$.param(r),null,a,t,"service")},deleteSession:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id:i,id_mercato:e};return this.del("servizi/v1_leghebuste/EliminaTornata?"+$.param(r),null,a,t,"service")},getAuctions:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),timestamp:e||0};return this.get("servizi/v1_legheMercatoAsta/listaAste?"+$.param(t),null,i,a,"service",!0)},createAuction:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/v1_legheMercatoAsta/creaAsta?"+$.param(t),e,i,a,"service")},raiseAuction:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.put("servizi/v1_legheMercatoAsta/aggiornaAsta?"+$.param(t),e,i,a,"service")},removeAuctionPromise:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.del("servizi/v1_legheMercatoAsta/eliminaPromessa?"+$.param(t),e,i,a,"service")},cancelAssignedAuction:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_asta:e,id_squadra:i,id_calciatore:a};return this.del("servizi/v1_legheMercatoAsta/Elimina?"+$.param(s),null,t,r,"service")},getSealedBids:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),timestamp:e||0};return this.get("servizi/v1_legheMercatoBusta/listaBuste?"+$.param(t),null,i,a,"service",!0)},createSealedBid:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/v1_legheMercatoBusta/creaBusta?"+$.param(t),e,i,a,"service")},removeSealedBid:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias()},s={id:e,offerta:0,id_calciatore:i,id_calciatore_promesso:0};return this.del("servizi/v1_legheMercatoBusta/eliminaBustaInCorso?"+$.param(r),s,a,t,"service")},cancelClosedSealedBid:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_busta:e,id_squadra:i,id_calciatore:a};return this.del("servizi/v1_legheMercatoBusta/eliminaBustaAssegnata?"+$.param(s),null,t,r,"service")},getSealedBidDetails:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_busta:e,d:!0};return this.get("servizi/V1_LegheMercatoBusta/listaPuntate?"+$.param(t),null,i,a,"service")},getSessionSealedBids:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e,id_tornata:i};return this.get("servizi/v1_legheMercatoBusta/listaBusteConcluse?"+$.param(r),null,a,t,"service")},getPlayerList:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_mercato:e,tipo_mercato:i};a&&(s.dummy=!0);var n=a?"listaSvincolatiAdmin":"listaSvincolati";return this.get("servizi/v1_legheCalciatori/"+n+"?"+$.param(s),null,t,r,"service")},getFreePlayerList:function(e,i){var a={alias_lega:Globals.getLeagueAlias(),t:Math.round(64+5e3*Math.random())};return this.get("servizi/V1_LegheCalciatori/listaSvincolatiNoMercato?"+$.param(a),null,e,i,"service")},sendExchangeProposal:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e};return this.post("servizi/v1_legheScambi/proponi?"+$.param(r),i,a,t,"service")},cancelExchangeProposal:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e,id_scambio:i,annulla:!0};return this.del("servizi/v1_legheScambi/annullaorifiuta?"+$.param(r),null,a,t,"service")},acceptExchangeProposal:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e,id_scambio:i};return this.put("servizi/v1_legheScambi/accetta?"+$.param(r),null,a,t,"service")},rejectExchangeProposal:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_mercato:e,id_scambio:i,annulla:!1};return this.del("servizi/v1_legheScambi/annullaorifiuta?"+$.param(r),null,a,t,"service")},buyPlayers:function(e,i,a,t,r,s){var n={alias_lega:Globals.getLeagueAlias()},l={id_squadra:e,ids:i.join(";"),costi:a.join(";")},o=t?"v1_leghemercatoOrdinarioAdmin":"v1_leghemercatoOrdinario";return this.put("servizi/"+o+"/salva?"+$.param(n),l,r,s,"service")},releasePlayers:function(e,i,a,t,r,s){var n={alias_lega:Globals.getLeagueAlias()},l={id_squadra:e,ids:i.join(";"),costi:a.join(";")},o=t?"v1_leghemercatoOrdinarioAdmin":"v1_leghemercatoOrdinario";return this.del("servizi/"+o+"/svincola?"+$.param(n),l,r,s,"service")},getRosterState:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_squadra:e,rose:Boolean(i)},n=a?"v1_leghemercatoOrdinarioAdmin":"v1_leghemercatoOrdinario";return this.get("servizi/"+n+"/squadra?"+$.param(s),null,t,r,"service",!0)},getMarketMovements:function(e,i,a,t,r,s){var n={alias_lega:Globals.getLeagueAlias(),id_mercato:e,page_size:t||10,page:a||0};return i&&(n.id_squadra=i),this.get("servizi/V1_LegheMercatoMovimenti/lista?"+$.param(n),null,r,s,"service")},getCustomizedCredits:function(e,i){var a={alias_lega:Globals.getLeagueAlias()};return this.get("servizi/V1_LegheCrediti/crediti?"+$.param(a),null,e,i,"service")},setCustomizedCredits:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/V1_LegheCrediti/crediti?"+$.param(t),e,i,a,"service")},getCustomizableRoles:function(e,i){var a={alias_lega:Globals.getLeagueAlias()};return this.get("servizi/V1_LegheCalciatori/CalciatoriRuoliAlternativi?"+$.param(a),null,e,i,"service")},setCustomizedRoles:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/V1_LegheOpzioniRuoli?"+$.param(t),e,i,a,"service")},getPenalityOrExtraPoints:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.get("servizi/V1_LeghePenalizzazioni/listaPenalizzazioni?"+$.param(t),{id_competizione:e},i,a,"service")},setPenalityOrExtraPoints:function(e,i,a,t,r,s,n){var l={alias_lega:Globals.getLeagueAlias()},o={id_squadra:e,id_competizione:i,bonus:a,malus:t,motivo:r};return this.post("servizi/V1_LeghePenalizzazioni/penalizzazioni?"+$.param(l),o,s,n,"service")},getFormationsStatus:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_comp:e,giornata:i};return this.get("servizi/V1_LegheFormazioni/lista?"+$.param(r),null,a,t,"service")},getUncalculatedRounds:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.get("servizi/V1_LegheCompetizione/GiornateNonCalcolate?"+$.param(t),null,i,a,"service")},retrieveFormation:function(e,i,a,t,r){var s={alias_lega:Globals.getLeagueAlias(),id_comp:e};return i&&(s.id_squadra=i),a&&(s.giornata_lega=a),this.get("servizi/V1_LegheFormazioni/Visualizza?"+$.param(s),null,t,r,"service")},saveFormation:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return this.post("servizi/V1_LegheFormazioni/SalvaAdmin?"+$.param(t),e,i,a,"service")},saveMyFormation:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias()};return urlParams.app&&(t.dummy=!0),this.put("servizi/V1_LegheFormazioni/Salva?"+$.param(t),e,i,a,"service")},retrieveOpponentFormation:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_comp:e,dummy:!0};return this.get("servizi/V1_LegheFormazioni/VisualizzaAvversario?"+$.param(t),null,i,a,"service")},checkLiveData:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),giornata_a:e};return this.get("servizi/V1_LegheLive/TimeStamp?"+$.param(t),null,i,a,"service")},retrieveLiveData:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_comp:MyLeague.getCurrentCompetitionId(),id_squadra:e||0};return this.get("servizi/V1_LegheLive/Visualizza?"+$.param(t),null,i,a,"service")},getCompetitionRounds:function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.get("servizi/V1_LegheCalcolo/Giornate?"+$.param(t),null,i,a,"service")},getRoundSchemes:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_competizione:e,giornata:i};return this.get("servizi/V1_LegheCalcolo/Moduli?"+$.param(r),null,a,t,"service")},calculateRound:function(e,i,a,t,r,s){var n={alias_lega:Globals.getLeagueAlias(),id_competizione:e,giornata:i};return this.post("servizi/V1_LegheCalcolo/CalcolaGiornata?"+$.param(n),{bonus:a,ufficio:t},r,s,"service")},resetRound:function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_competizione:e,giornata:i};return this.put("servizi/V1_LegheCalcolo/AnnullaCalcoloGiornata2?"+$.param(r),null,a,t,"service")}},_defineProperty(_Api,"resetCompetition",function(e,i,a){var t={alias_lega:Globals.getLeagueAlias(),id_competizione:e};return this.del("servizi/V1_LegheCalcolo/ResettaCompetizione?"+$.param(t),null,i,a,"service")}),_defineProperty(_Api,"sendBetslip",function(e,i,a,t){var r={alias_lega:Globals.getLeagueAlias(),id_competizione:Competitions.getCurrentId(),giornata:e,colonna:i};return this.put("servizi/V1_LegheSchedina/GiocaColonna?"+$.param(r),null,a,t,"service")}),_defineProperty(_Api,"getBetslips",function(e,i){var a={alias_lega:Globals.getLeagueAlias(),id_competizione:Competitions.getCurrentId()};return this.get("servizi/V1_LegheSchedina/Archivio?"+$.param(a),null,e,i,"service")}),_defineProperty(_Api,"getAdminRegistry",function(e,i){var a={alias_lega:Globals.getLeagueAlias()};return this.get("servizi/v1_diario/lista?"+$.param(a),null,e,i,"service")}),_defineProperty(_Api,"getActionUrl",function(e,i){switch(i){case"direct":return e;case"service":return Settings.apiBaseUrl+e;default:return Settings.apiBaseUrl+"api/"+Settings.apiVer+"/"+Settings.apiVer+"_"+e}}),_defineProperty(_Api,"parseServerErrorMessage",function(e,i){var a=[];return e&&e.error_msgs&&e.error_msgs.length?a=e.error_msgs.map(function(a){return{type:Api.SERVER_MESSAGE_TYPES[a.id]||e.success?"success":"danger",title:i,body:Str.get((e.success?"success-":"error-")+a.id,a.descrizione),key:a.id}}):a.push({type:"danger",body:Str.get("error-000","Errore non riconosciuto"),key:"-1"}),a}),_Api);